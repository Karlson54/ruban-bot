**Ruban Bot** — це Telegram-бот, розроблений на Python для керування каталогом товарів, оформлення замовлень, роботи з кошиком покупок та адміністрування. Проект реалізовано за допомогою бібліотеки [pyTelegramBotAPI](https://github.com/eternnoir/pyTelegramBotAPI) для інтеграції з Telegram API.

---

## Зміст

- [Функціонал](#функціонал)
- [Архітектура проекту](#архітектура-проекту)
- [Структура бази даних](#структура-бази-даних)
- [Опис методів та модулів](#опис-методів-та-модулів)
- [Встановлення та запуск](#встановлення-та-запуск)
- [Внесок у проект](#внесок-у-проект)
- [Ліцензія](#ліцензія)
- [Контакти](#контакти)

---

## Функціонал

- **Користувацький інтерфейс**: простий та зручний інтерфейс для взаємодії з ботом.
- **Каталог товарів**: перегляд списку доступних товарів із описом та цінами.
- **Оформлення замовлень**: користувачі можуть додавати товари до кошика та оформлювати замовлення.
- **Адміністративний модуль**: функції для адміністрування, включаючи керування контентом, замовленнями та відгуками.
- **Збір відгуків**: користувачі можуть залишати відгуки, які зберігаються в базі даних.

---

## Архітектура проекту

Проект організовано за принципом розділення відповідальності, що забезпечує легкість підтримки та розширення:

- **Точка входу**:  
  - `bot.py` — основний файл, який ініціалізує базу даних, створює екземпляр бота та реєструє всі обробники подій.
  
- **Конфігурація** (`config/`):  
  - `bot_config.py` — містить налаштування токена, ID адміністраторів, параметри бази даних та мов.
  - `init_db.py` — модуль для ініціалізації бази даних. Він створює необхідні таблиці та заповнює каталог зразковими даними.

- **Обробники** (`handler/`):  
  - `admin_handler.py` — функціонал для адміністраторів (керування ботом, обробка адміністративних команд).
  - `user_handler.py` — обробка команд та запитів користувачів.
  - `catalog_handler.py` — робота з каталогом товарів, відображення списку, детальної інформації.
  - `order_handler.py` — оформлення та обробка замовлень.
  - `cart_handler.py` — робота з кошиком покупок (додавання, редагування, видалення товарів).
  - `settings_handler.py` — налаштування користувацьких параметрів, включаючи мовні налаштування.

- **Репозиторій** (`repository/`):  
  Містить модулі для взаємодії з базою даних (CRUD операції для таблиць).

- **Сервісний рівень** (`service/`):  
  Реалізує бізнес-логіку для обробки запитів користувачів, обробки замовлень та інших операцій.

---

## Структура бази даних

При першому запуску виконується ініціалізація бази даних (SQLite), яка створює наступні таблиці:

- **users**  
  Зберігає інформацію про користувачів:
  - `id` — унікальний ідентифікатор користувача.
  - `username`, `first_name`, `last_name` — дані профілю.
  - `language` — обрана мова інтерфейсу (за замовчуванням "ua").
  - `is_waiting_feedback` — прапорець, що вказує на очікування відгуку.
  - `registered_at` — час реєстрації.

- **catalog**  
  Зберігає інформацію про товари:
  - `id` — унікальний ідентифікатор товару.
  - `name` — назва товару.
  - `description` — опис товару.
  - `price` — ціна товару.
  
  _При першій ініціалізації, якщо таблиця порожня, автоматично додаються зразкові товари._

- **orders**  
  Зберігає дані замовлень:
  - `id` — унікальний ідентифікатор замовлення.
  - `user_id` — ідентифікатор користувача, який зробив замовлення.
  - `user_name` — ім’я користувача.
  - `item_id` — ідентифікатор замовленого товару.
  - `item_name` — назва товару.
  - `price` — ціна товару.
  - `status` — статус замовлення (за замовчуванням "new").
  - `created_at` — дата та час створення замовлення.

- **cart**  
  Зберігає дані кошика покупок:
  - `id` — унікальний ідентифікатор запису.
  - `user_id` — ідентифікатор користувача.
  - `item_id` — ідентифікатор товару.
  - `quantity` — кількість доданих товарів (за замовчуванням 1).
  - `added_at` — час додавання товару.
  
  _Унікальне обмеження на комбінацію `user_id` та `item_id` забезпечує, що один товар не буде додано більше одного разу для одного користувача._

- **feedback**  
  Зберігає відгуки користувачів:
  - `id` — унікальний ідентифікатор відгуку.
  - `user_id` — ідентифікатор користувача.
  - `text` — текст відгуку.
  - `created_at` — дата створення відгуку.

---

## Опис методів та модулів

- **Ініціалізація**  
  - **init_database()** (файл `config/init_db.py`):  
    Створює файл бази даних, якщо він відсутній, та формує всі необхідні таблиці. Також перевіряє таблицю каталогу та додає зразкові товари, якщо вона порожня.

- **Реєстрація обробників**  
  - У файлі `bot.py` створюється екземпляр бота, після чого для кожного модуля (адміністративний, користувацький, каталог, замовлення, кошик, налаштування) викликається метод `register_handlers()`.  
    Ці методи забезпечують підписку на відповідні команди та повідомлення від користувачів.

- **Обробка команд користувачів**  
  - **UserHandler**: обробляє стандартні команди користувачів, наприклад, початкове привітання, запит на перегляд каталогу або оформлення замовлення.
  - **CatalogHandler**: відповідає за вивід списку товарів, детальну інформацію про товари та пошук у каталозі.
  - **OrderHandler**: відповідає за оформлення замовлень, їх збереження в базі даних та зміну статусу замовлення.
  - **CartHandler**: дозволяє додавати товари до кошика, редагувати кількість та видаляти товари з кошика.
  - **SettingsHandler**: дозволяє користувачам змінювати налаштування, включаючи мову інтерфейсу.

- **Адміністративні функції**  
  - **AdminHandler**: містить методи для адміністрування бота, такі як перегляд статистики, управління товарами, замовленнями та відгуками. Він обмежує доступ до цих функцій лише для користувачів з адміністративними правами (ID вказані у конфігурації).

- **Взаємодія з базою даних**  
  - CRUD-операції реалізовано у відповідних модулях репозиторію (`repository/`). Ці модулі відповідають за зчитування, додавання, оновлення та видалення даних із бази даних.

---

## Встановлення та запуск

### Передумови

- Python 3.6 або новіше.
- [pyTelegramBotAPI](https://github.com/eternnoir/pyTelegramBotAPI) (встановлюється через `pip install pyTelegramBotAPI`).
- SQLite3 для роботи з базою даних (база даних зберігається у файлі `shop_bot.db`).

## Налаштування середовища

1. **Токен бота**:  
   Встановіть змінну середовища `BOT_TOKEN`. Це можна зробити, створивши файл `.env` у кореневій папці проекту або налаштувавши змінну безпосередньо у вашій системі.  
   Значення токена знаходиться у файлі [config/bot_config.py](config/bot_config.py).

2. **Адміністратор**:  
   Список ID адміністраторів також вказано у [config/bot_config.py](config/bot_config.py). За необхідності додайте власні ID для доступу до адміністративних функцій.

### Клонування репозиторію

```bash
git clone https://github.com/Karlson54/ruban-bot.git
cd ruban-bot
